import org.junit.Test;
import static org.junit.Assert.*;
import java.lang.reflect.Method;
import java.text.SimpleDateFormat;
import java.util.Date;

public class FeedBuilderTest {

    @Test
    public void testFeedHeaderUsingReflection() throws Exception {
        // Load the class
        Class<?> clazz = Class.forName("FeedBuilder"); // Change package if needed

        // Create an instance using reflection
        Object instance = clazz.getDeclaredConstructor().newInstance();

        // Access and invoke the protected method feedHeader()
        Method feedHeaderMethod = clazz.getDeclaredMethod("feedHeader");
        feedHeaderMethod.setAccessible(true);
        feedHeaderMethod.invoke(instance);

        // Access the getOutput method
        Method getOutputMethod = clazz.getMethod("getOutput");
        String output = (String) getOutputMethod.invoke(instance);

        // Validate output
        int expectedLength = 1 + 8 + 12 + 4 + 225;
        assertEquals(expectedLength, output.length());

        assertEquals("0", output.substring(0, 1).trim());
        assertEquals("ATLANTIC LIQ", output.substring(9, 21).trim());
        assertEquals("0001", output.substring(21, 25).trim());

        // Validate that date can be parsed
        String dateStr = output.substring(1, 9).trim();
        try {
            new SimpleDateFormat("EEE MMM dd").parse(dateStr);
        } catch (Exception e) {
            fail("Date format is incorrect: " + dateStr);
        }
    }
}
