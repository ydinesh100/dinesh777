import java.lang.reflect.Field;
import java.lang.reflect.Method;

@Test
public void testAppendNewLine_whenBufferNotEmpty() throws Exception {
    // Get reference to private field g_o_sb
    Field sbField = P06_IACC_01_BoprStringBuffer.class.getDeclaredField("g_o_sb");
    sbField.setAccessible(true);
    StringBuffer internalBuffer = (StringBuffer) sbField.get(boprStringBuffer);

    // Add initial content to ensure buffer is not empty
    internalBuffer.append("InitialContent");

    // Invoke private method appendNewLine()
    Method appendNewLineMethod = P06_IACC_01_BoprStringBuffer.class.getDeclaredMethod("appendNewLine");
    appendNewLineMethod.setAccessible(true);
    appendNewLineMethod.invoke(boprStringBuffer);

    // Get updated buffer content
    String result = internalBuffer.toString();

    // Validate \r\n is appended
    assertTrue(result.endsWith("InitialContent\r\n"));
}
